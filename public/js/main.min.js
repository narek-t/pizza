function setSelectWidth(){$(".custom-select__wrapper").each(function(index,el){$(this).find(".custom-select--compute-value").html($(this).find(".custom-select option:selected").text()),$(this).find("select.custom-select").width($(this).find(".custom-select--compute").width())})}var PizzaThemeGlobalVariables={};$(document).ready(function(){function showCartOk(target){var container=target.parents(".item"),text=$('<div class="cart-ok"><p>Товар добавлен в корзину</p></div>').hide();$(container).append(text),$(text).show("normal"),setTimeout(function(){$(container).find(".cart-ok").hide("normal"),setTimeout(function(){$(container).find(".cart-ok").remove()},500)},1500)}$(".open-menu").click(function(event){event.preventDefault(),$(".main-sidebar").addClass("visible")}),$(".main-sidebar__close").click(function(event){event.preventDefault(),$(".main-sidebar").removeClass("visible")}),PizzaThemeGlobalVariables.changeSelectWidthOnChange=function(el){var container=$(el).parents(".custom-select__wrapper"),text=$(container).find(".custom-select option:selected").text();$(container).find(".custom-select--compute-value").html(text);var width=$(container).find(".custom-select--compute").width();$(container).find("select.custom-select").width(width)},$("#app").on("change",".custom-select",function(event){PizzaThemeGlobalVariables.changeSelectWidthOnChange($(this))}),$(".district-change__select").on("change",function(){var selectedDistrict=$(this).val();"all"==selectedDistrict?$(".contacts__sidebar-list-item").removeClass("unvisible"):($(".contacts__sidebar-list-item").removeClass("unvisible"),$(".contacts__sidebar-list-item").not(" [data-district="+selectedDistrict+"] ").addClass("unvisible"))});var headingHeight=$(".site-header__top").height();$(window).scroll(function(event){$(document).scrollTop()>headingHeight?$(".site-header").addClass("fixed"):$(".site-header").removeClass("fixed")}),$(".catalog__slider").slick({arrows:!1,dots:!0}),$(".catalog__sort-by").click(function(event){event.preventDefault(),$(this).toggleClass("active")}),$(".zoom-img").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0},zoom:{enabled:!0,duration:300}}),PizzaThemeGlobalVariables.updateSpinner=function(obj){var contentObj=$(obj).parents(".item__count-wrapper").find(".qty"),value=parseInt(contentObj.val());$(obj).hasClass("item__count_plus")?value++:value<=1||value--,contentObj.val(value)},$(".need-validate").blur(function(event){var val=$(this).val();val=val<=0||""==val?1:Math.ceil(val),$(this).val(val)}),$(".item__add-to-cart").click(function(event){event.preventDefault(),showCartOk($(this))}),$(".delivery__address-city").change(function(event){$(this).val()})}),$(window).load(function(){setSelectWidth()});var vm=new Vue({el:"#app",data:{cartPage:{userName:"testname",userPhoneNumber:"testnumber",loggedIn:!1,pickup:!1,restaurants:{},city:"Нижний Новгород",district:"",districts:[],currentDistrict:[],currentRestaurantName:"",currentRestaurant:[]}},methods:{findDistricts:function(){var cities=this.cartPage.restaurants;for(this.cartPage.districts=[],i=cities.length-1;i>=0;i--)cities[i].city===this.cartPage.city&&(this.cartPage.districts.push(cities[i].districts),this.cartPage.district=cities[i].districts[0].districtName,this.cartPage.currentDistrict=cities[i].districts[0]);setTimeout(function(){setSelectWidth()},10)},findRestaurants:function(){var allFindedDistricts=this.cartPage.districts[0],val=this.cartPage.district;for(this.cartPage.currentDistrict=[],this.cartPage.currentRestaurant=[],i=allFindedDistricts.length-1;i>=0;i--)allFindedDistricts[i].districtName===val&&(this.cartPage.currentDistrict.push(allFindedDistricts[i]),this.cartPage.currentRestaurantName=allFindedDistricts[i].restaurants[0].placeName,this.cartPage.currentRestaurant.push(allFindedDistricts[i].restaurants[0]));setTimeout(function(){setSelectWidth()},10)},findCurrentRestaurants:function(){var val=this.cartPage.currentRestaurantName;this.cartPage.currentRestaurant=[];var restaurantsInCurrentDistrict=this.cartPage.currentDistrict[0].restaurants;for(i=restaurantsInCurrentDistrict.length-1;i>=0;i--)restaurantsInCurrentDistrict[i].placeName===val&&this.cartPage.currentRestaurant.push(restaurantsInCurrentDistrict[i])}},computed:{},watch:{"cartPage.pickup":function(){this.findDistricts(),this.findRestaurants(),setTimeout(function(){setSelectWidth()},10)}}});